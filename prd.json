{
  "title": "RocksDB vs MDBX Performance Benchmark",
  "description": "Benchmark comparing MDBX vs RocksDB storage performance for historical tables on Hoodi network",
  "stories": [
    {
      "id": 1,
      "title": "Setup benchmark environment",
      "priority": 1,
      "passes": true,
      "acceptance_criteria": [
        "Environment variables set (HOODI_DATADIR_MDBX, HOODI_DATADIR_ROCKS, RPC_URL, START_BLOCK)",
        "Create copies of Hoodi datadir for isolated benchmarking",
        "Verify reth binaries have RocksDB feature enabled",
        "Create benchmark-results directory structure"
      ],
      "notes": "Completed 2026-01-13. Environment in benchmark-env.sh. Both hoodi-bench-mdbx and hoodi-bench-rocks directories created. RocksDB flags confirmed (4 flags available)."
    },
    {
      "id": 2,
      "title": "Prepare MDBX baseline node",
      "priority": 2,
      "passes": false,
      "acceptance_criteria": [
        "Unwind MDBX node to START_BLOCK",
        "Verify node can start successfully",
        "Metrics endpoint accessible"
      ],
      "notes": "BLOCKED 2026-01-13: Unwind fails with state root mismatch. ROOT CAUSE: Database pipeline out of sync - Execution at 1,766,369 but Hashing stages incomplete at 1,764,300. 670 accounts and 261,491 storage slots not hashed. This prevents Merkle stage from computing correct state root. NOT a RocksDB bug - database integrity issue."
    },
    {
      "id": 3,
      "title": "Prepare RocksDB test node",
      "priority": 3,
      "passes": false,
      "acceptance_criteria": [
        "Unwind RocksDB node to START_BLOCK",
        "Verify node starts with all --storage.*-in-rocksdb flags",
        "Metrics endpoint accessible"
      ],
      "notes": "BLOCKED - Same database state issue as Story 2. Cannot unwind due to incomplete hashing stages."
    },
    {
      "id": 4,
      "title": "Run MDBX baseline benchmark",
      "priority": 4,
      "passes": false,
      "acceptance_criteria": [
        "Run reth node with MDBX-only storage",
        "Execute reth-bench new-payload-fcu for 1000 blocks",
        "Save output to benchmark-results/mdbx_benchmark.csv",
        "Capture node logs to benchmark-results/mdbx_reth.log"
      ],
      "notes": ""
    },
    {
      "id": 5,
      "title": "Run RocksDB benchmark",
      "priority": 5,
      "passes": false,
      "acceptance_criteria": [
        "Run reth node with RocksDB storage flags",
        "Execute reth-bench new-payload-fcu for 1000 blocks",
        "Save output to benchmark-results/rocks_benchmark.csv",
        "Capture node logs to benchmark-results/rocks_reth.log"
      ],
      "notes": ""
    },
    {
      "id": 6,
      "title": "Analyze and compare results",
      "priority": 6,
      "passes": false,
      "acceptance_criteria": [
        "Generate comparison charts (gas throughput, latency)",
        "Calculate performance delta percentages",
        "Create summary report in benchmark-results/REPORT.md"
      ],
      "notes": ""
    }
  ]
}
