number: 20354
title: 'feat: make blockstream in debugclient configurable'
state: open
author: 0xKarl98
head: blockstream_configurable
base: main
labels:
- C-enhancement
- A-sdk
created_at: 2025-12-13T14:47:42Z
updated_at: 2026-01-10T15:16:41Z
additions: 362
deletions: 143
is_draft: false
files:
- path: crates/consensus/debug-client/src/client.rs
  additions: 12
  deletions: 9
- path: crates/consensus/debug-client/src/providers/etherscan.rs
  additions: 36
  deletions: 28
- path: crates/consensus/debug-client/src/providers/rpc.rs
  additions: 52
  deletions: 42
- path: crates/node/builder/src/launch/debug.rs
  additions: 262
  deletions: 64
body: "This closes issue #20327\r\n\r\nwhat i did : \r\n\r\n- Made the debug blockstream configurable via DebugNode::block_provider, adding DebugBlockProviderContext/DebugBlockProviderFuture and a default rpc_block_from_response fast‑path (type match → no serde round‑trip, with JSON fallback).\r\n\r\n-  Standardized dev payload builder selection with a single DevBuilderConfig enum (factory / builder / default+map), removing multiple option fields.\r\n\r\n- Centralized consensus‑client spawning in spawn_consensus_client and unified factory vs default paths to avoid duplicated setup.\r\n\r\n- Switched to a runtime‑configurable provider handle (Arc<dyn BlockProvider>) and a tiny adapter so we can swap RPC/Etherscan/custom providers without extra branching.\r\n\r\ncc @mattsse  @klkvr "
