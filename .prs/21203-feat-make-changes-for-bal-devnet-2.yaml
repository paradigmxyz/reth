number: 21203
title: 'feat: make changes for Bal devnet 2'
state: open
author: Rimeeeeee
head: bal-devnet-2
base: main
labels: []
created_at: 2026-01-20T10:10:58Z
updated_at: 2026-01-21T12:40:50Z
additions: 1273
deletions: 247
is_draft: true
files:
- path: .github/assets/hive/build_simulators.sh
  additions: 6
  deletions: 3
- path: .github/assets/hive/load_images.sh
  additions: 1
  deletions: 1
- path: .github/workflows/bench.yml
  additions: 2
  deletions: 2
- path: .github/workflows/book.yml
  additions: 1
  deletions: 1
- path: .github/workflows/compact.yml
  additions: 1
  deletions: 1
- path: .github/workflows/e2e.yml
  additions: 1
  deletions: 1
- path: .github/workflows/hive.yml
  additions: 29
  deletions: 26
- path: .github/workflows/integration.yml
  additions: 1
  deletions: 1
- path: .github/workflows/lint.yml
  additions: 1
  deletions: 1
- path: .github/workflows/stage.yml
  additions: 1
  deletions: 1
- path: .github/workflows/unit.yml
  additions: 2
  deletions: 1
- path: .github/workflows/windows.yml
  additions: 2
  deletions: 2
- path: Cargo.lock
  additions: 42
  deletions: 69
- path: Cargo.toml
  additions: 45
  deletions: 31
- path: bin/reth-bench/src/valid_payload.rs
  additions: 43
  deletions: 1
- path: crates/chain-state/src/in_memory.rs
  additions: 1
  deletions: 0
- path: crates/chain-state/src/test_utils.rs
  additions: 1
  deletions: 0
- path: crates/chainspec/src/spec.rs
  additions: 26
  deletions: 0
- path: crates/consensus/common/Cargo.toml
  additions: 5
  deletions: 0
- path: crates/consensus/common/src/lib.rs
  additions: 1
  deletions: 0
- path: crates/consensus/common/src/validation.rs
  additions: 42
  deletions: 0
- path: crates/consensus/consensus/src/lib.rs
  additions: 32
  deletions: 0
- path: crates/e2e-test-utils/src/test_rlp_utils.rs
  additions: 1
  deletions: 0
- path: crates/engine/invalid-block-hooks/src/witness.rs
  additions: 1
  deletions: 0
- path: crates/engine/local/src/miner.rs
  additions: 1
  deletions: 1
- path: crates/engine/primitives/src/lib.rs
  additions: 10
  deletions: 1
- path: crates/engine/tree/benches/channel_perf.rs
  additions: 1
  deletions: 0
- path: crates/engine/tree/src/tree/metrics.rs
  additions: 1
  deletions: 0
- path: crates/engine/tree/src/tree/mod.rs
  additions: 9
  deletions: 3
- path: crates/engine/tree/src/tree/payload_processor/bal.rs
  additions: 1
  deletions: 1
- path: crates/engine/tree/src/tree/payload_validator.rs
  additions: 3
  deletions: 1
- path: crates/engine/tree/src/tree/precompile_cache.rs
  additions: 4
  deletions: 4
- path: crates/engine/util/Cargo.toml
  additions: 3
  deletions: 0
- path: crates/engine/util/src/reorg.rs
  additions: 4
  deletions: 0
- path: crates/era/src/test_utils.rs
  additions: 2
  deletions: 0
- path: crates/ethereum/consensus/Cargo.toml
  additions: 2
  deletions: 0
- path: crates/ethereum/consensus/src/lib.rs
  additions: 10
  deletions: 0
- path: crates/ethereum/consensus/src/validation.rs
  additions: 71
  deletions: 1
- path: crates/ethereum/engine-primitives/src/lib.rs
  additions: 6
  deletions: 2
- path: crates/ethereum/engine-primitives/src/payload.rs
  additions: 49
  deletions: 3
- path: crates/ethereum/evm/Cargo.toml
  additions: 2
  deletions: 0
- path: crates/ethereum/evm/src/build.rs
  additions: 15
  deletions: 1
- path: crates/ethereum/evm/src/test_utils.rs
  additions: 1
  deletions: 0
- path: crates/ethereum/payload/src/lib.rs
  additions: 21
  deletions: 7
- path: crates/evm/evm/src/execute.rs
  additions: 8
  deletions: 2
- path: crates/evm/evm/src/lib.rs
  additions: 3
  deletions: 2
- path: crates/evm/execution-types/src/execute.rs
  additions: 1
  deletions: 0
- path: crates/exex/exex/src/wal/storage.rs
  additions: 34
  deletions: 32
- path: crates/net/downloaders/src/file_client.rs
  additions: 9
  deletions: 0
- path: crates/net/eth-wire-types/src/blocks.rs
  additions: 4
  deletions: 0
- path: crates/net/eth-wire-types/src/header.rs
  additions: 3
  deletions: 0
- path: crates/optimism/consensus/src/lib.rs
  additions: 2
  deletions: 0
- path: crates/optimism/consensus/src/validation/mod.rs
  additions: 3
  deletions: 0
- path: crates/optimism/evm/src/build.rs
  additions: 9
  deletions: 1
- path: crates/optimism/evm/src/receipts.rs
  additions: 2
  deletions: 2
- path: crates/optimism/node/src/engine.rs
  additions: 3
  deletions: 1
- path: crates/optimism/primitives/src/bedrock.rs
  additions: 1
  deletions: 0
- path: crates/payload/builder/src/lib.rs
  additions: 1
  deletions: 1
- path: crates/payload/builder/src/test_utils.rs
  additions: 1
  deletions: 0
- path: crates/payload/primitives/src/error.rs
  additions: 11
  deletions: 0
- path: crates/payload/primitives/src/lib.rs
  additions: 76
  deletions: 5
- path: crates/payload/primitives/src/payload.rs
  additions: 9
  deletions: 1
- path: crates/payload/validator/src/amsterdam.rs
  additions: 23
  deletions: 0
- path: crates/payload/validator/src/lib.rs
  additions: 1
  deletions: 0
- path: crates/primitives-traits/src/block/recovered.rs
  additions: 4
  deletions: 1
- path: crates/primitives-traits/src/block/sealed.rs
  additions: 2
  deletions: 0
- path: crates/rpc/rpc-api/Cargo.toml
  additions: 0
  deletions: 1
- path: crates/rpc/rpc-api/src/debug.rs
  additions: 7
  deletions: 5
- path: crates/rpc/rpc-api/src/engine.rs
  additions: 19
  deletions: 1
- path: crates/rpc/rpc-engine-api/src/capabilities.rs
  additions: 2
  deletions: 0
- path: crates/rpc/rpc-engine-api/src/engine_api.rs
  additions: 91
  deletions: 2
- path: crates/rpc/rpc-engine-api/src/metrics.rs
  additions: 4
  deletions: 0
- path: crates/rpc/rpc-eth-api/src/helpers/call.rs
  additions: 6
  deletions: 1
- path: crates/rpc/rpc-eth-api/src/helpers/estimate.rs
  additions: 7
  deletions: 2
- path: crates/rpc/rpc-eth-api/src/helpers/pending_block.rs
  additions: 6
  deletions: 2
- path: crates/rpc/rpc-eth-api/src/helpers/trace.rs
  additions: 6
  deletions: 1
- path: crates/rpc/rpc-server-types/src/constants.rs
  additions: 1
  deletions: 1
- path: crates/rpc/rpc/Cargo.toml
  additions: 0
  deletions: 1
- path: crates/rpc/rpc/src/debug.rs
  additions: 16
  deletions: 4
- path: crates/rpc/rpc/src/testing.rs
  additions: 1
  deletions: 0
- path: crates/stateless/src/validation.rs
  additions: 1
  deletions: 0
- path: crates/storage/codecs/src/alloy/block_access_list.rs
  additions: 231
  deletions: 0
- path: crates/storage/codecs/src/alloy/header.rs
  additions: 7
  deletions: 2
- path: crates/storage/codecs/src/alloy/mod.rs
  additions: 2
  deletions: 1
- path: crates/storage/db-api/src/models/mod.rs
  additions: 3
  deletions: 0
- path: crates/storage/db-models/src/blocks.rs
  additions: 46
  deletions: 1
- path: crates/storage/db-models/src/lib.rs
  additions: 4
  deletions: 1
- path: crates/storage/provider/src/providers/blockchain_provider.rs
  additions: 2
  deletions: 0
- path: crates/storage/provider/src/providers/consistent.rs
  additions: 1
  deletions: 0
- path: crates/storage/provider/src/providers/database/provider.rs
  additions: 6
  deletions: 0
- path: crates/storage/provider/src/writer/mod.rs
  additions: 27
  deletions: 0
- path: crates/storage/storage-api/src/chain.rs
  additions: 29
  deletions: 1
- path: crates/transaction-pool/src/validate/eth.rs
  additions: 16
  deletions: 0
- path: docs/vocs/scripts/fix-search-index.ts
  additions: 1
  deletions: 1
- path: examples/custom-engine-types/src/main.rs
  additions: 3
  deletions: 2
- path: examples/custom-node/src/primitives/header.rs
  additions: 3
  deletions: 0
- path: testing/ef-tests/src/cases/blockchain_test.rs
  additions: 10
  deletions: 2
- path: testing/ef-tests/src/models.rs
  additions: 1
  deletions: 0
body: "TODO:\r\n*  ~rpc endpoints~ DONE [ref](https://github.com/paradigmxyz/reth/pull/21245)"
