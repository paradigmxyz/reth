number: 20619
title: 'perf(engine): do not invalidate accounts in cache post Cancun'
state: open
author: shekhirin
head: alexey/execution-cache-selfdestruct
base: main
labels:
- C-perf
- A-engine
created_at: 2025-12-23T16:27:21Z
updated_at: 2026-01-10T15:16:41Z
additions: 77
deletions: 29
is_draft: true
files:
- path: crates/engine/tree/Cargo.toml
  additions: 1
  deletions: 2
- path: crates/engine/tree/benches/state_root_task.rs
  additions: 2
  deletions: 1
- path: crates/engine/tree/src/tree/cached_state.rs
  additions: 13
  deletions: 4
- path: crates/engine/tree/src/tree/payload_processor/mod.rs
  additions: 33
  deletions: 17
- path: crates/engine/tree/src/tree/payload_processor/prewarm.rs
  additions: 2
  deletions: 1
- path: crates/engine/tree/src/tree/payload_validator.rs
  additions: 25
  deletions: 4
- path: crates/node/builder/src/rpc.rs
  additions: 1
  deletions: 0
body: "https://github.com/paradigmxyz/reth/blob/0585c84ca8f75a5d55008ab46ebcd9bc77df0bea/crates/engine/tree/src/tree/cached_state.rs#L476-L480\r\n\r\nThis opens the path to using caches that can't do invalidation in bulk, such as fixed-cache."
