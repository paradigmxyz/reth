number: 20844
title: 'refactor(engine): buffer state updates and process in parallel'
state: open
author: figtracer
head: batched_hashing
base: main
labels: []
created_at: 2026-01-08T15:58:48Z
updated_at: 2026-01-10T15:16:41Z
additions: 119
deletions: 29
is_draft: false
files:
- path: crates/engine/tree/src/tree/payload_processor/multiproof.rs
  additions: 119
  deletions: 29
body: "this buffers state updates and processes all in parallel\r\n\r\nless granularity on parallelization as compared to #20635 and following #20842 \r\n\r\navg transaction count per block seems to be around 300, so the lower bound of the benchmarks doesn't look concerning\r\n \r\nbenchmarks:\r\nhttps://gist.github.com/figtracer/e4e146d1a9d5817139a7c25aebb0c9bd"
