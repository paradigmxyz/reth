<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" type="text/css"?>
<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1829.015625 991" style="max-width: 100%;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="graph-div" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink"><style>#graph-div{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#graph-div .error-icon{fill:#552222;}#graph-div .error-text{fill:#552222;stroke:#552222;}#graph-div .edge-thickness-normal{stroke-width:1px;}#graph-div .edge-thickness-thick{stroke-width:3.5px;}#graph-div .edge-pattern-solid{stroke-dasharray:0;}#graph-div .edge-thickness-invisible{stroke-width:0;fill:none;}#graph-div .edge-pattern-dashed{stroke-dasharray:3;}#graph-div .edge-pattern-dotted{stroke-dasharray:2;}#graph-div .marker{fill:#333333;stroke:#333333;}#graph-div .marker.cross{stroke:#333333;}#graph-div svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#graph-div p{margin:0;}#graph-div .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#graph-div .cluster-label text{fill:#333;}#graph-div .cluster-label span{color:#333;}#graph-div .cluster-label span p{background-color:transparent;}#graph-div .label text,#graph-div span{fill:#333;color:#333;}#graph-div .node rect,#graph-div .node circle,#graph-div .node ellipse,#graph-div .node polygon,#graph-div .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#graph-div .rough-node .label text,#graph-div .node .label text,#graph-div .image-shape .label,#graph-div .icon-shape .label{text-anchor:middle;}#graph-div .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#graph-div .rough-node .label,#graph-div .node .label,#graph-div .image-shape .label,#graph-div .icon-shape .label{text-align:center;}#graph-div .node.clickable{cursor:pointer;}#graph-div .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#graph-div .arrowheadPath{fill:#333333;}#graph-div .edgePath .path{stroke:#333333;stroke-width:2.0px;}#graph-div .flowchart-link{stroke:#333333;fill:none;}#graph-div .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#graph-div .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#graph-div .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#graph-div .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#graph-div .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#graph-div .cluster text{fill:#333;}#graph-div .cluster span{color:#333;}#graph-div div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#graph-div .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#graph-div rect.text{fill:none;stroke-width:0;}#graph-div .icon-shape,#graph-div .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#graph-div .icon-shape p,#graph-div .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#graph-div .icon-shape rect,#graph-div .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#graph-div .label foreignObject{overflow:visible;}#graph-div :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="graph-div_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="graph-div_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="graph-div_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="graph-div_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="graph-div_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="graph-div_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="MultiProofManager" class="cluster"><rect height="104" width="755.12890625" y="879" x="235.775390625" style=""></rect><g transform="translate(546.80078125, 879)" class="cluster-label"><foreignObject height="24" width="133.078125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>MultiProofManager</p></span></div></foreignObject></g></g><g data-look="classic" id="SparseTrieTask" class="cluster"><rect height="104" width="507.51953125" y="879" x="1108.779296875" style=""></rect><g transform="translate(1297.44921875, 879)" class="cluster-label"><foreignObject height="24" width="130.1796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Sparse Trie thread</p></span></div></foreignObject></g></g><g data-look="classic" id="StateRootTask" class="cluster"><rect height="619" width="1675.6640625" y="162" x="22.41796875" style=""></rect><g transform="translate(779.515625, 162)" class="cluster-label"><foreignObject height="24" width="161.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>State Root Task thread</p></span></div></foreignObject></g></g><g data-look="classic" id="StateRootTaskMessages" class="cluster"><rect height="104" width="1813.015625" y="8" x="8" style=""></rect><g transform="translate(824.1484375, 8)" class="cluster-label"><foreignObject height="24" width="180.71875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>State Root Task messages</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_GenerateProofTargets_DeduplicateProofTargets_0" d="M187.418,265L187.418,271.167C187.418,277.333,187.418,289.667,198.968,301.698C210.517,313.73,233.616,325.459,245.166,331.324L256.716,337.189"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_NewProof_ProofSequencer_1" d="M1107.234,253L1124.188,261.167C1141.143,269.333,1175.052,285.667,1192.006,303.333C1208.961,321,1208.961,340,1208.961,349.5L1208.961,359"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ProofSequencer_EndCondition1_2" d="M1257.003,417L1271.535,425.167C1286.066,433.333,1315.129,449.667,1347.065,461.931C1379.001,474.194,1413.811,482.389,1431.216,486.486L1448.621,490.583"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ProofSequencer_ProofSequencerCondition_3" d="M1205.408,417L1204.334,425.167C1203.259,433.333,1201.11,449.667,1200.035,465.25C1198.961,480.833,1198.961,495.667,1198.961,510.5C1198.961,525.333,1198.961,540.167,1198.961,557C1198.961,573.833,1198.961,592.667,1198.961,611.5C1198.961,630.333,1198.961,649.167,1199.035,664.167C1199.11,679.167,1199.259,690.334,1199.333,695.917L1199.408,701.5"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_EndCondition1_EndCondition2_4" d="M1536.617,530.5L1536.534,534.583C1536.451,538.667,1536.284,546.833,1536.271,554.5C1536.258,562.167,1536.398,569.334,1536.469,572.917L1536.539,576.501"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_EndCondition2_EndCondition3_5" d="M1536.617,643.5L1536.534,647.583C1536.451,651.667,1536.284,659.833,1536.271,667.5C1536.258,675.167,1536.398,682.334,1536.469,685.917L1536.539,689.501"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_StateRootMessage::PrefetchProofs_DeduplicateProofTargets_6" d="M534.016,87L534.016,91.167C534.016,95.333,534.016,103.667,534.016,112C534.016,120.333,534.016,128.667,534.016,137C534.016,145.333,534.016,153.667,534.016,168.5C534.016,183.333,534.016,204.667,534.016,228C534.016,251.333,534.016,276.667,522.466,295.198C510.916,313.73,487.817,325.459,476.267,331.324L464.718,337.189"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_StateRootMessage::StateUpdate_GenerateProofTargets_7" d="M187.418,87L187.418,91.167C187.418,95.333,187.418,103.667,187.418,112C187.418,120.333,187.418,128.667,187.418,137C187.418,145.333,187.418,153.667,187.418,161.333C187.418,169,187.418,176,187.418,179.5L187.418,183"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_DeduplicateProofTargets_MultiProofSpawn_8" d="M360.717,441L360.717,445.167C360.717,449.333,360.717,457.667,360.717,469.25C360.717,480.833,360.717,495.667,360.717,510.5C360.717,525.333,360.717,540.167,360.717,557C360.717,573.833,360.717,592.667,360.717,611.5C360.717,630.333,360.717,649.167,360.717,668C360.717,686.833,360.717,705.667,360.717,724.5C360.717,743.333,360.717,762.167,360.717,779.75C360.717,797.333,360.717,813.667,360.717,830C360.717,846.333,360.717,862.667,360.717,874.333C360.717,886,360.717,893,360.717,896.5L360.717,900"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_StateRootMessage::EmptyProof_NewProof_9" d="M877.254,87L877.254,91.167C877.254,95.333,877.254,103.667,877.254,112C877.254,120.333,877.254,128.667,877.254,137C877.254,145.333,877.254,153.667,893.387,163.77C909.52,173.873,941.785,185.746,957.918,191.682L974.051,197.619"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_StateRootMessage::ProofCalculated_NewProof_10" d="M1225.105,87L1225.105,91.167C1225.105,95.333,1225.105,103.667,1225.105,112C1225.105,120.333,1225.105,128.667,1225.105,137C1225.105,145.333,1225.105,153.667,1208.973,163.77C1192.84,173.873,1160.574,185.746,1144.441,191.682L1128.309,197.619"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_NewProof_MultiProofCompletion_11" d="M974.629,253L951.475,261.167C928.321,269.333,882.013,285.667,858.859,308.5C835.705,331.333,835.705,360.667,835.705,388C835.705,415.333,835.705,440.667,835.705,460.75C835.705,480.833,835.705,495.667,835.705,510.5C835.705,525.333,835.705,540.167,835.705,557C835.705,573.833,835.705,592.667,835.705,611.5C835.705,630.333,835.705,649.167,835.705,668C835.705,686.833,835.705,705.667,835.705,724.5C835.705,743.333,835.705,762.167,835.705,779.75C835.705,797.333,835.705,813.667,835.705,830C835.705,846.333,835.705,862.667,835.705,874.333C835.705,886,835.705,893,835.705,896.5L835.705,900"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ProofSequencerCondition_SparseTrieUpdate_12" d="M1199.461,744.5L1199.378,750.583C1199.294,756.667,1199.128,768.833,1199.044,783.083C1198.961,797.333,1198.961,813.667,1198.961,830C1198.961,846.333,1198.961,862.667,1219.349,876.084C1239.738,889.501,1280.514,900.002,1300.903,905.252L1321.291,910.502"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_StataRootMessage::FinishedStateUpdates_EndCondition1_13" d="M1608.957,87L1608.957,91.167C1608.957,95.333,1608.957,103.667,1608.957,112C1608.957,120.333,1608.957,128.667,1608.957,137C1608.957,145.333,1608.957,153.667,1608.957,168.5C1608.957,183.333,1608.957,204.667,1608.957,228C1608.957,251.333,1608.957,276.667,1608.957,304C1608.957,331.333,1608.957,360.667,1608.957,388C1608.957,415.333,1608.957,440.667,1602.784,457.228C1596.611,473.789,1584.265,481.577,1578.092,485.471L1571.919,489.366"></path><path marker-end="url(#graph-div_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_EndCondition3_SparseTrieUpdate_14" d="M1536.617,756.5L1536.534,760.583C1536.451,764.667,1536.284,772.833,1536.201,785.083C1536.117,797.333,1536.117,813.667,1536.117,830C1536.117,846.333,1536.117,862.667,1522.653,876.011C1509.189,889.355,1482.26,899.71,1468.796,904.887L1455.332,910.064"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1208.9609375, 302)" class="edgeLabel"><g transform="translate(-52.25, -12)" class="label"><foreignObject height="24" width="104.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Add new proof</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1198.9609375, 830)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes, send multiproof and state update</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1536.1171875, 830)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Close SparseTrieUpdate channel</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(187.41796875, 60)" id="flowchart-StateRootMessage::StateUpdate-370" class="node default"><rect height="54" width="288.8359375" y="-27" x="-144.41796875" style="" class="basic label-container"></rect><g transform="translate(-114.41796875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="228.8359375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>StateRootMessage::StateUpdate</p></span></div></foreignObject></g></g><g transform="translate(534.015625, 60)" id="flowchart-StateRootMessage::PrefetchProofs-371" class="node default"><rect height="54" width="304.359375" y="-27" x="-152.1796875" style="" class="basic label-container"></rect><g transform="translate(-122.1796875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="244.359375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>StateRootMessage::PrefetchProofs</p></span></div></foreignObject></g></g><g transform="translate(877.25390625, 60)" id="flowchart-StateRootMessage::EmptyProof-372" class="node default"><rect height="54" width="282.1171875" y="-27" x="-141.05859375" style="" class="basic label-container"></rect><g transform="translate(-111.05859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="222.1171875"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>StateRootMessage::EmptyProof</p></span></div></foreignObject></g></g><g transform="translate(1225.10546875, 60)" id="flowchart-StateRootMessage::ProofCalculated-373" class="node default"><rect height="54" width="313.5859375" y="-27" x="-156.79296875" style="" class="basic label-container"></rect><g transform="translate(-126.79296875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="253.5859375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>StateRootMessage::ProofCalculated</p></span></div></foreignObject></g></g><g transform="translate(1608.95703125, 60)" id="flowchart-StataRootMessage::FinishedStateUpdates-374" class="node default"><rect height="54" width="354.1171875" y="-27" x="-177.05859375" style="" class="basic label-container"></rect><g transform="translate(-147.05859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="294.1171875"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>StataRootMessage::FinishedStateUpdates</p></span></div></foreignObject></g></g><g transform="translate(360.716796875, 390)" id="flowchart-DeduplicateProofTargets-375" class="node default"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Deduplicate proof targets according to the list of already fetched proofs</p></span></div></foreignObject></g></g><g transform="translate(187.41796875, 226)" id="flowchart-GenerateProofTargets-376" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Generate proof targets from state update</p></span></div></foreignObject></g></g><g transform="translate(1051.1796875, 226)" id="flowchart-NewProof-378" class="node default"><rect height="54" width="213.5234375" y="-27" x="-106.76171875" style="" class="basic label-container"></rect><g transform="translate(-76.76171875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="153.5234375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>New proof calculated</p></span></div></foreignObject></g></g><g transform="translate(1208.9609375, 390)" id="flowchart-ProofSequencer-379" class="node default"><rect height="54" width="171.890625" y="-27" x="-85.9453125" style="" class="basic label-container"></rect><g transform="translate(-55.9453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="111.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ProofSequencer</p></span></div></foreignObject></g></g><g transform="translate(1536.1171875, 510.5)" id="flowchart-EndCondition1-380" class="node default"><polygon transform="translate(-98.1875,19.5)" class="label-container" points="9.75,0 186.625,0 196.375,-19.5 186.625,-39 9.75,-39 0,-19.5"></polygon><g transform="translate(-80.9375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="161.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>All updates processed?</p></span></div></foreignObject></g></g><g transform="translate(1198.9609375, 724.5)" id="flowchart-ProofSequencerCondition-382" class="node default"><polygon transform="translate(-97.2109375,19.5)" class="label-container" points="9.75,0 184.671875,0 194.421875,-19.5 184.671875,-39 9.75,-39 0,-19.5"></polygon><g transform="translate(-79.9609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="159.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Has sequential proofs?</p></span></div></foreignObject></g></g><g transform="translate(1536.1171875, 611.5)" id="flowchart-EndCondition2-384" class="node default"><polygon transform="translate(-123.25,31.5)" class="label-container" points="15.75,0 230.75,0 246.5,-31.5 230.75,-63 15.75,-63 0,-31.5"></polygon><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>All pending proofs requested?</p></span></div></foreignObject></g></g><g transform="translate(1536.1171875, 724.5)" id="flowchart-EndCondition3-385" class="node default"><polygon transform="translate(-123.25,31.5)" class="label-container" points="15.75,0 230.75,0 246.5,-31.5 230.75,-63 15.75,-63 0,-31.5"></polygon><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>All proofs finished processing?</p></span></div></foreignObject></g></g><g transform="translate(1400.88671875, 931)" id="flowchart-SparseTrieUpdate-386" class="node default"><rect height="39" width="210.7265625" y="-19.5" x="-105.36328125" ry="19.5" rx="19.5" style="" class="basic label-container"></rect><g transform="translate(-92.98828125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="185.9765625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>SparseTrieUpdate channel</p></span></div></foreignObject></g></g><g transform="translate(835.705078125, 931)" id="flowchart-MultiProofCompletion-387" class="node default"><rect height="54" width="240.3984375" y="-27" x="-120.19921875" style="" class="basic label-container"></rect><g transform="translate(-90.19921875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="180.3984375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>on_calculation_complete</p></span></div></foreignObject></g></g><g transform="translate(360.716796875, 931)" id="flowchart-MultiProofSpawn-388" class="node default"><rect height="54" width="179.8828125" y="-27" x="-89.94140625" style="" class="basic label-container"></rect><g transform="translate(-59.94140625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="119.8828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>spawn_or_queue</p></span></div></foreignObject></g></g></g></g></g></svg>