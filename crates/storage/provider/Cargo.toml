[package]
name = "reth-provider"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
homepage.workspace = true
repository.workspace = true
description = "Reth storage provider."

[dependencies]
# reth
reth-primitives.workspace = true
reth-interfaces.workspace = true
reth-revm-primitives = { path = "../../revm/revm-primitives" }
reth-db = { path = "../db" }
reth-trie = { path = "../../trie" }

# async
tokio = { workspace = true, features = ["sync", "macros", "rt-multi-thread"] }
tokio-stream = { workspace = true, features = ["sync"] }

# tracing
tracing.workspace = true

# misc
auto_impl = "1.0"
itertools.workspace = true
pin-project.workspace = true
derive_more = "0.99"
parking_lot.workspace = true

# test-utils
reth-rlp = { workspace = true, optional = true }


revm-utils = { git = "https://github.com/megaeth-labs/revm", branch = "andy/debug/performance-dashboard", optional = true }
# revm-utils = { path = "/home/andy/Source/work/revm/crates/utils", optional = true }

minstant = { version = "0.1.3", optional = true }

[dev-dependencies]
reth-db = { path = "../db", features = ["test-utils"] }
reth-primitives = { workspace = true, features = ["arbitrary", "test-utils"] }
reth-rlp.workspace = true
reth-trie = { path = "../../trie", features = ["test-utils"] }
reth-interfaces = { workspace = true, features = ["test-utils"] }
parking_lot.workspace = true
tempfile = "3.3"
assert_matches.workspace = true

[features]
test-utils = ["reth-rlp"]
# enable_opcode_metrics = ["reth-revm-primitives/enable_opcode_metrics", "revm-utils"]
enable_opcode_metrics = ["revm-utils"]
enable_cache_record = ["revm-utils"]
enable_db_speed_record = [
    "reth-primitives/enable_db_speed_record",
    "minstant",
]
